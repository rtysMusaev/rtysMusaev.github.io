# Инструкция по работе с git

## Что такое контроль версий и зачем он нужен?

Контроль версий (контроль исходного кода) — практика, которая позволяет отслеживать
изменения исходного кода и управлять ими.

## Что такое Git?

Git - это консольная утилита, для отслеживания и ведения истории изменения файлов, в вашем проекте.

## Создание репозитория

Репозиторием можно сделать директорию на вашем локальном компьютере. Находясь в директории в терминале наберите команду: 

### git init

При её введении утилита git создаст директорию .git которая содержит все сведения о репозитории. Директория является скрытой (файлы и директории наичнающиеся с точки "." считаются скрытыми в linux и др. unix системах).

## Проврека состояния репозитория

### git status

Команда выведет состояние репозитория. Неиндексированные файлы, индексированные но не зафиксированные файлы.

## Создание коммитов

После того, как в директорию был добавлен или был изменен файл необходимо добавить этот файл к отслеживанию системой git
### git add
Зафиксировать *"закоммитить"* обавленные к отслеживанию файлы необходимо
### git commit
вместе с git commit лучше использовать опцию -m, которая позволяет сразу записать комментарий к фиксации. 
например **git commit -m "Initial commit"**
Если не использовать опцию -m, то откроется редактор, где нужно будет написать комментарий.
* необходимо войти в режим редактирования: **i** ; 
* написать комментарий ; 
* **Esc** ; 
* **:wq** (где w - write - записать и q - quit - выйти)

## Журнал изменений

Перед переключением версии файла в Git, чтобы увидеть
количество сохранений используйте команду 
### git log
Команда выведет коммиты. 

У коммитов есть контрольная сумма из 40 символов шестнадцаричной системы следующего вида: 24b9da6552252987aa493b52f8696cd6d3b00373
Переключится на зафиксированное состояние можно с помощью команду
### git checkout
В команде необходимо указать 4 первых символа контрольной суммы
### git checkout 24b9
Чтобы вернуться к последней версии коммита
### git checkout master
## Сравнение изменений
Для вывода изменений в файлах по сравнению с последним коммитом, используется git diff без параметров:
### git diff
* Команда выводит изменения в файлах, которые еще не были добавлены в индекс. Сравнение происходит с последним коммитом
* Если вы изменили какие-нибудь файлы в вашем рабочем каталоге и добавили один или несколько из них в индекс (с помощью git add), то команда git diff не покажет изменения в этих файлах

Чтобы показать изменения в файлах, включая файлы, добавленные в индекс, используется ключ --cached:
### git diff --cached
Команда git diff позволяет сравнивать два различных коммита.  Для этого в качестве первого аргумента команде git diff указывается хеш первого коммита, а вторым аргументом хеш второго коммита:
### git diff 1460312 b71fc24
Для вывода всех изменений между концами двух веток, необходимо для git diff указать имена веток
## Ветвление
Основной идеей ветвления является отклонение от основного кода и продолжение работы независимо от него. Под веткой принято понимать независимую последовательность коммитов в хронологическом порядке. 

Имя основной ветки Git-проекта по умолчанию — master (однако зачастую бывает main, например, в GitHub) Эта ветка ничем не отличается от остальных и также ее можно переименовать, но по договоренности master принято считать главной веткой в проекте.

Команда git branch создает ветку:
### git branch branch_name
После данной операции ветка уже была создана, но вы по-прежнему находитесь в прежней ветке. Чтобы сразу перейти во вновь созданную ветку можно воспользоваться командой git checkout с опцией -b (branch):
### git checkout -b branch_name
## Слияние веток
Слияние - это перенос изменений с одной ветки на другую. делается с помощью команды merge:
### git merge branch
Слияние проихсодит в ветку, в которой вы находитесь из ветки, которая указывается в команде git merge как агргумент
## Конфликты
- Если в двух разных ветках есть изменения противоречащие друг другу, то возникнет конфликт слияния merge
- Однако, если во 2-й ветке сделаны изменения, а в 1-й не сделаны конфликта не возникнет, изменения сделанные во 2-й ветке будут применены к 1-й.
- Только если в обоих ветках были изменения возникнет конфликт
- Конфликт возникнет если изменения были в одних и тех же строках одного и того же файла в обеих ветках
Рекомендуется решить конфликт вручную отредактировав файл.

## Удаленный репозиторий
Для работы с удаленными репозиториями имеются различные сервисы:
- Github
- Gitlab
- BitBucket
- множество других

Зарегистрировавшись в одном из сервисов, вы сможете использовать создавать свои удаленные репозитории или работать в созданных кем-то репозиториях

## Создание локального репозитория из удаленного репозитория
### git clone
создает на локальном компьютере копию репозитория

git clone https://github.com/userName/repositoryName.git

## Создание удаленного репозитория из локального репозитория
### git remote 
С помощью этой команды можно добавить свой локальный репозиторий в удаленный: 

### git remote add origin https://github.com/username/repository

Можно поменять привязку локального репозитория к 

### git remote set-url origin https://github.com/username/repository

## Доступ к удаленному репозиторию
При первом git push VS Code предлагает авторизоваться для соединиения репозитория, что гарантирует управление удаленным репозиторием только с разрешения владельца репозитория

Универсальным методом, который рекомендует Github является доступ через токен, 40 значный уникальный "логин-пароль" для предоставления доступа к удаленному репозиторию. Он отлично работает в любом терминале, в не зависимости от VS Code
### git remote set-url origin https://username:token@github.com/username/repository.git

## Загрузка изменений
### git pull
Команда загружает изменения и выполняет слияние git merge
### git fetch
Команда загружает изменения, но не выполняет git merge. На кзагуженные коммиты можно посмотреть и определить, что с ними делать

## Выгрузка изменений
### git push
Команда загружает данные в удаленный репозиторием

Считается правильным загружать в отдельную ветку, а не в главную. Так как слиянием веток обычно занимается один человек и так же удобнее отслеживать работу каждого в удаленном репозитории.

## Ответвление удаленных репозиториев: fork
В сервисах удаленных репозиториев доступно копирование репозитория внутри самого сервиса для работы с такой копией. Такая копия называется форком: fork

## Пул реквест
### pull request
Команда, которая делает запрос владельцу репозитория - получателю pull request на выполнение команды git pull по отношению к репозиторию - заявителя pull request. Обычно заявителем является участник сделавший копию fork после изменения/доработки fork. Так же принято в копии fork все изменения делать в отдельной ветке.
